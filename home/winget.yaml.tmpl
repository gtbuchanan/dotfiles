---
# yaml-language-server: $schema=https://aka.ms/configuration-dsc-schema/0.2
# https://learn.microsoft.com/en-us/windows/package-manager/configuration/create
properties:
  configurationVersion: 0.2.0
  resources:
    - resource: Microsoft.Windows.Developer/DeveloperMode
      directives:
        description: Enable Developer Mode
        allowPrerelease: true
      settings:
        Ensure: Present
    - resource: Microsoft.Windows.Developer/Taskbar
      directives:
        description: Configure Taskbar
        allowPrerelease: true
      settings:
        SearchBoxMode: Hide
        TaskViewButton: Hide
        RestartExplorer: true
        WidgetsButton: Hide
    - resource: Microsoft.Windows.Developer/WindowsExplorer
      directives:
        description: Configure Explorer
        allowPrerelease: true
      settings:
        FileExtensions: Show
        HiddenFiles: Show
        ItemCheckBoxes: Show
        RestartExplorer: true
    - resource: Microsoft.Windows.Developer/ShowSecondsInClock
      directives:
        description: Show Seconds in Clock
        allowPrerelease: true
      settings:
        Ensure: Present
    - resource: Microsoft.Windows.Developer/EnableDarkMode
      directives:
        description: Enable Dark Mode
        allowPrerelease: true
      settings:
        Ensure: Present
        RestartExplorer: true
    - resource: PSDscResources/Script
      directives:
        description: Enable Sudo
        allowPrerelease: true
      id: sudo
      settings:
        GetScript: |
          @{ Result = (sudo config) }
        TestScript: |
          (sudo config).Contains("Inline")
        SetScript: |
          Start-Process sudo -Verb runAs -ArgumentList "config --enable normal" -Wait
    - resource: PSDscResources/Environment
      dependsOn: [git]
      directives:
        description: Add Git binaries to Path
      id: gitPath
      settings:
        ensure: Present
        name: Path
        path: true
        target: [Machine]
        value: C:\Program Files\Git\bin
    - resource: Microsoft.WinGet.DSC/WinGetPackage
      directives:
        description: Install Git
      id: git
      settings:
        id: Git.Git
        source: winget
    - resource: Microsoft.WinGet.DSC/WinGetPackage
      directives:
        description: Install NodeJS
      id: nodejs
      settings:
        id: OpenJS.NodeJS.LTS
{{- if eq .hosttype "ewn" }}
        version: 20.19.1
{{- end }}
        source: winget
    - resource: Microsoft.WinGet.DSC/WinGetPackage
      directives:
        description: Install pnpm
      id: pnpm
      settings:
        id: pnpm.pnpm
        source: winget
    - resource: Microsoft.WinGet.DSC/WinGetPackage
      directives:
        description: Install PowerShell
      id: pwsh
      settings:
        id: Microsoft.PowerShell
        source: winget
    - resource: Microsoft.WinGet.DSC/WinGetPackage
      id: powerToys
      directives:
        description: Install PowerToys
        allowPrerelease: true
      settings:
        id: Microsoft.PowerToys
        source: winget
    - resource: Microsoft.PowerToys.Configure/PowerToysConfigure
      dependsOn: [powerToys]
      directives:
        description: Configure PowerToys
      settings:
        AdvancedPaste:
          Enabled: true
        Awake:
          Enabled: true
        ColorPicker:
          Enabled: true
        FancyZones:
          Enabled: true
        FileLocksmith:
          Enabled: true
        # Interferes with KVM switch keybinding
        FindMyMouse:
          Enabled: false
        Hosts:
          Enabled: true
        ImageResizer:
          Enabled: true
        PowerAccent:
          Enabled: true
        PowerRename:
          Enabled: true
    - resource: Microsoft.WinGet.DSC/WinGetPackage
      directives:
        description: Install Python Launcher
      id: pythonLauncher
      settings:
        id: Python.Launcher
        source: winget
    - resource: Microsoft.WinGet.DSC/WinGetPackage
      directives:
        description: Install Python
      id: python3
      settings:
        id: Python.Python.3.13
        source: winget
    - resource: Microsoft.WinGet.DSC/WinGetPackage
      id: visualStudio
      directives:
        description: Install Visual Studio 2022
      settings:
{{- if eq .hosttype "ewn" }}
        id: Microsoft.VisualStudio.2022.Professional
{{- else }}
        id: Microsoft.VisualStudio.2022.Community
{{- end }}
        source: winget
    - resource: Microsoft.WinGet.DSC/WinGetPackage
      id: vsCode
      directives:
        description: Install Visual Studio Code
      settings:
        id: Microsoft.VisualStudioCode
        source: winget
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - C# Dev Kit
        allowPrerelease: true
      settings:
        name: ms-dotnettools.csdevkit
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Code Spell Checker
        allowPrerelease: true
      settings:
        name: streetsidesoftware.code-spell-checker
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Color Highlight
        allowPrerelease: true
      settings:
        name: naumovs.color-highlight
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Debugger for Firefox
        allowPrerelease: true
      settings:
        name: firefox-devtools.vscode-firefox-debug
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Docker
        allowPrerelease: true
      settings:
        name: ms-azuretools.vscode-docker
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - EditorConfig
        allowPrerelease: true
      settings:
        name: editorconfig.editorconfig
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - ESLint
        allowPrerelease: true
      settings:
        name: dbaeumer.vscode-eslint
        exist: true
{{- if eq .hosttype "personal" }}
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - ESPHome
        allowPrerelease: true
      settings:
        name: esphome.esphome-vscode
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - fstar-vscode-assistant
        allowPrerelease: true
      settings:
        name: fstarlang.fstar-vscode-assistant
        exist: true
{{- end }}
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - GitHub Copilot
        allowPrerelease: true
      settings:
        name: github.copilot
        exist: true
{{- if eq .hosttype "personal" }}
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - HAProxy
        allowPrerelease: true
      settings:
        name: bmarkovic.haproxy
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Haskell Syntax Highlighting
        allowPrerelease: true
      settings:
        name: justusadam.language-haskell
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Ionide for F#
        allowPrerelease: true
      settings:
        name: ionide.ionide-fsharp
        exist: true
{{- end }}
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Jupyter
        allowPrerelease: true
      settings:
        name: ms-toolsai.jupyter
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Kubernetes
        allowPrerelease: true
      settings:
        name: ms-kubernetes-tools.vscode-kubernetes-tools
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Markdown Preview Enhanced
        allowPrerelease: true
      settings:
        name: shd101wyy.markdown-preview-enhanced
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - markdownlint
        allowPrerelease: true
      settings:
        name: davidanson.vscode-markdownlint
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Polyglot Notebooks
        allowPrerelease: true
      settings:
        name: ms-dotnettools.dotnet-interactive-vscode
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - PowerShell
        allowPrerelease: true
      settings:
        name: ms-vscode.powershell
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Python
        allowPrerelease: true
      settings:
        name: ms-python.python
        exist: true
{{- if eq .hosttype "personal" }}
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Simple GHC (Haskell) Integration
        allowPrerelease: true
      settings:
        name: dramforever.vscode-ghc-simple
        exist: true
{{- end }}
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Todo Tree
        allowPrerelease: true
      settings:
        name: gruntfuggly.todo-tree
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Vim
        allowPrerelease: true
      settings:
        name: vscodevim.vim
        exist: true
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Vitest
        allowPrerelease: true
      settings:
        name: vitest.explorer
        exist: true
{{- if eq .hosttype "personal" }}
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - Vy(atta) like .boot file support
        allowPrerelease: true
      settings:
        name: zunix.edgerouter-conf
        exist: true
{{- end }}
    - resource: Microsoft.VSCode.Dsc/VSCodeExtension
      dependsOn: [vsCode]
      directives:
        description: Install VS Code Extension - YAML
        allowPrerelease: true
      settings:
        name: redhat.vscode-yaml
        exist: true
